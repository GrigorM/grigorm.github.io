---
category: interactive
layout: post
title: "Viza-viza"
excerpt: "Animacion interaktiv i bërë me p5.js"
lang: sq
image: /img/crawler.png
---
<p>Për tu zhvilluar më tej.</p>
<div id="sketch-holder"></div>
<button id="play" class="custom-btn">Play</button>
<button id="pause" class="custom-btn">Pause</button>
<button id="add" class="custom-btn">Add</button>
<button id="save" class="custom-btn">Save image</button>
<button id="clear" class="custom-btn">Clear</button>
<button id="restart" class="custom-btn">Restart</button>
<p id="sketch-modifiers">
  <label for="bgColor">Change background color</label>
  <input type="color" id="bgColor" class="pull-right"><br/>
  <label for="strokeColor">Change stroke color</label>
  <input type="color" id="strokeColor" class="pull-right">
</p>
<script>
var cs = [];
var nr = 7;
var addCrawler = false;
var backgroundColor = "#141414";
var strokeColor = "#fff";
function setup(){
  var canvas = createCanvas(850, 450);
  canvas.parent("sketch-holder");
  background(backgroundColor);
  stroke(255);
  strokeWeight(1);
  for(var i=0; i<nr; i++){
    cs.push( new Crawler(width/2, height/2) );
  }
}

function draw(){
  for (var i=0; i<cs.length; i++) {
    cs[i].exist();
  }
}

function mousePressed(){
  if(addCrawler){
    cs.push(new Crawler(mouseX, mouseY));
    addCrawler = false;
    $("#add").text("Add");
  }
}

function Crawler(x, y){
  this.p = createVector(x, y);
  this.m = createVector( random(1)<0.5 ? 1 : -1, random(1)<0.5 ? 1 : -1 );

  this.display = function(){
    point(this.p.x, this.p.y);
  }

  this.move = function(){
    this.p.add(this.m);
  }

  this.changeDirection = function(){
    if (random(1)<0.1) {
      var prob = random(1);

      if (prob < 0.5) {
        this.m.x *= -1;
      } else {
        this.m.y *= -1;
      }
    }
  }

  this.exist = function(){
    this.display();
    this.move();
    this.changeDirection();
  }
}

// interface
$("#play").click(function(){
  loop()
});
$("#pause").click(function(){
  noLoop();
});
$("#add").click(function(){
  if($(this).text() == "Add"){
    $(this).text("Click on the canvas");
    addCrawler = true;
  } else {
    $(this).text("Add");
    addCrawler = false;
  }
});
$("#save").click(function(){
  saveCanvas(canvas, 'image', 'png');
});
$("#clear").click(function(){
  background(20);
});
$("#restart").click(function(){
  background(backgroundColor);
  stroke(strokeColor);
  cs.splice(nr, cs.length - nr);
  for(var i=0; i<cs.length; i++){
    cs[i].p.x = width/2;
    cs[i].p.y = height/2;
  }
  loop();
});
$("#bgColor").change(function(){
  backgroundColor = $(this).val();
  $("#restart").click();
});
$("#strokeColor").change(function(){
  strokeColor = $(this).val();
  $("#restart").click();
})
</script>
